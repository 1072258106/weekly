webpackJsonp([2],{ewin:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),s=a("NYxO"),l={data:function(){return{weeklyContent:"",currentDate:(new Date).toLocaleDateString(),day:(new Date).getDay(),weekDay:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],currentWeek:"",weeklyId:"",weeklyTableData:[],departmentMember:[],unWeeklyData:[]}},created:function(){var e=this;this.currentWeek=this.weekDay[this.day],this.departmentMemberList(),this.getDepartmentWeeklyList().then(function(t){if(0==t.errno){e.weeklyTableData=t.data;var a={usernumList:e.weeklyTableData.map(function(e){return{usernum:e.usernum}})};e.getUnWeeklyList(a).then(function(t){0==t.errno&&(e.unWeeklyData=t.data)})}})},computed:r()({},Object(s.c)(["userInfo"])),methods:r()({},Object(s.b)(["getCurrentWeekly","addWeekly","getDepartmentWeeklyList","getDepartmentMemberList","getUnWeeklyList"]),{departmentMemberList:function(){var e=this;this.getDepartmentMemberList().then(function(t){0==t.errno?e.departmentMember=t.data.map(function(e){return{username:e.username,usernum:e.usernum}}):e.$message.error(t.errmsg||"服务器开小差")})},formatDateTime:function(e){var t=new Date(parseInt(e)),a=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var u=t.getSeconds();return a+"-"+n+"-"+r+" "+s+":"+l+":"+(u=u<10?"0"+u:u)},submitWeekly:function(){var e=this,t={content:this.weeklyContent,date:this.currentDate,id:this.weeklyId};this.addWeekly(t).then(function(t){0==t.errno?e.$message.success(t.errmsg||"提交成功"):e.$message.error(t.errmsg||"服务器开小差")})}})},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"write-weekly"},[a("div",{staticClass:"title"},["2"==e.userInfo.role?a("span",[e._v("公司")]):a("span",[e._v("部门")]),e._v("周报概览")]),e._v(" "),a("p",[e._v("今天："),a("span",[e._v(e._s(e.currentDate))]),e._v("，"),a("span",[e._v(e._s(e.currentWeek))])]),e._v(" "),a("p",[e._v("公司"),e.userInfo.department_name?a("span",[e._v("--部门")]):e._e(),e._v("："),a("span",[e._v(e._s(e.userInfo.company_name)),e.userInfo.department_name?a("span",[e._v("--"+e._s(e.userInfo.department_name))]):e._e()])]),e._v(" "),a("p",[a("label",["2"==e.userInfo.role?a("span",[e._v("公司人员("+e._s(e.departmentMember.length)+"人)：")]):a("span",[e._v("部门人员("+e._s(e.departmentMember.length)+"人)：")]),e._l(e.departmentMember,function(t,n){return a("span",[e._v(e._s(t.username)+"("+e._s(t.usernum)+")，")])})],2)]),e._v(" "),a("p",[a("label",[e._v("未填写周报("),a("span",{staticClass:"data-style"},[e._v(e._s(e.unWeeklyData.length)+"人")]),e._v(")："),e._l(e.unWeeklyData,function(t,n){return a("span",[e._v(e._s(t.username)+"("+e._s(t.usernum)+")，")])})],2)]),e._v(" "),a("p",[a("label",[e._v("已填周报("),a("span",{staticClass:"data-style"},[e._v(e._s(e.weeklyTableData.length)+"人")]),e._v(")如下所示：")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.weeklyTableData,border:""}},[a("el-table-column",{attrs:{label:"周报日期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateFormat")(t.row.startDate)))]),e._v("--"),a("span",[e._v(e._s(e._f("dateFormat")(t.row.endDate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"usernum",label:"工号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"周报内容"}}),e._v(" "),a("el-table-column",{attrs:{label:"最近一次提交日期",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateTimeFormat")(t.row.time))+"\n      ")]}}])})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(l,u,!1,function(e){a("ozw8")},"data-v-ae70da2e",null);t.default=o.exports},ozw8:function(e,t){}});
//# sourceMappingURL=2.eb06913a497182e484d0.js.map